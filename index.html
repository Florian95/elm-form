<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Elm Simple Form by etaque</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Elm Simple Form</h1>
      <h2 class="project-tagline">Easy forms handling in Elm</h2>
      <a href="https://github.com/etaque/elm-simple-form" class="btn">View on GitHub</a>
      <a href="https://github.com/etaque/elm-simple-form/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/etaque/elm-simple-form/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="elm-simpleform" class="anchor" href="#elm-simpleform" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Elm SimpleForm</h1>

<p>Simple forms made easy, for Elm.</p>

<p><em>Work in progress</em></p>

<h2>
<a id="features" class="anchor" href="#features" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Features</h2>

<ul>
<li>Validation API similar to <code>Json.Decode</code> with the standard <code>map</code>, <code>andThen</code>, etc ; you either get the desired output value or all field errors</li>
<li>HTML inputs helpers with pre-wired handlers for live validation</li>
<li>Suite of basic validations, with a way to add your own</li>
<li>Unlimited fields! See <code>:+</code> infix operator (or <code>apply</code> function)</li>
<li>Nested fields for record composition (<code>foo.bar.baz</code>)</li>
</ul>

<p><a href="./example/">See complete example here.</a></p>

<h2>
<a id="basic-usage" class="anchor" href="#basic-usage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Basic usage</h2>

<div class="highlight highlight-source-elm"><pre><span class="pl-k">module</span> <span class="pl-c1">Main</span> <span class="pl-k">where</span>

<span class="pl-k">import</span> <span class="pl-c1">StartApp</span>
<span class="pl-k">import</span> <span class="pl-c1">Effects</span> <span class="pl-k">exposing</span> (<span class="pl-k">Effects</span>)
<span class="pl-k">import</span> <span class="pl-c1">Html</span> <span class="pl-k">exposing</span> (..)
<span class="pl-k">import</span> <span class="pl-c1">Html.Attributes</span> <span class="pl-k">exposing</span> (..)
<span class="pl-k">import</span> <span class="pl-c1">Html.Events</span> <span class="pl-k">exposing</span> (..)

<span class="pl-k">import</span> <span class="pl-c1">Form</span> <span class="pl-k">exposing</span> (<span class="pl-k">Form</span>)
<span class="pl-k">import</span> <span class="pl-c1">Form.Validate</span> <span class="pl-k">as</span> <span class="pl-c1">Validate</span> <span class="pl-k">exposing</span> (..)
<span class="pl-k">import</span> <span class="pl-c1">Form.Input</span> <span class="pl-k">as</span> <span class="pl-c1">Input</span>


<span class="pl-k">type alias </span><span class="pl-c1">Foo</span> <span class="pl-k">=</span>
  <span class="pl-c1"><span class="pl-c1">{</span></span> bar <span class="pl-k">:</span> <span class="pl-c1">String</span>
  <span class="pl-c1"><span class="pl-c1">,</span></span> baz <span class="pl-k">:</span> <span class="pl-c1">Bool</span>
  <span class="pl-c1"><span class="pl-c1">}</span></span>


<span class="pl-c">-- Add form to your model and actions</span>

<span class="pl-k">type alias </span><span class="pl-c1">Model</span> <span class="pl-k">=</span>
  <span class="pl-c1"><span class="pl-c1">{</span></span> form <span class="pl-k">:</span> <span class="pl-c1">Form</span> <span class="pl-c1">()</span> <span class="pl-c1">Foo</span> <span class="pl-c1"><span class="pl-c1">}</span></span>

<span class="pl-k">type </span><span class="pl-c1">Action</span>
  <span class="pl-k">=</span> <span class="pl-c1">NoOp</span>
  <span class="pl-k">|</span> <span class="pl-c1">FormAction</span> <span class="pl-c1">Form</span><span class="pl-k">.</span><span class="pl-c1">Action</span>


<span class="pl-c">-- Setup form validation</span>

<span class="pl-en">init</span> <span class="pl-k">:</span> (<span class="pl-k">Model</span>, <span class="pl-k">Effects</span> <span class="pl-k">Action</span>)
<span class="pl-en">init </span><span class="pl-k">=</span>
  <span class="pl-k">(</span><span class="pl-c1"><span class="pl-c1">{</span></span> form <span class="pl-k">=</span> <span class="pl-c1">Form</span><span class="pl-k">.</span>initial <span class="pl-c1"><span class="pl-c1">[]</span></span> validate <span class="pl-c1"><span class="pl-c1">},</span></span> <span class="pl-c1">Effects</span><span class="pl-k">.</span>none<span class="pl-k">)</span>

<span class="pl-en">validate</span> <span class="pl-k">:</span> <span class="pl-k">Validate</span> <span class="pl-c1">()</span> <span class="pl-k">Form</span>
<span class="pl-en">validate </span><span class="pl-k">=</span>
  form2 <span class="pl-c1">Foo</span>
    <span class="pl-k">(</span><span class="pl-s"><span class="pl-pds">"</span>bar<span class="pl-pds">"</span></span> <span class="pl-k">:=</span> email<span class="pl-k">)</span>
    <span class="pl-k">(</span><span class="pl-s"><span class="pl-pds">"</span>baz<span class="pl-pds">"</span></span> <span class="pl-k">:=</span> bool<span class="pl-k">)</span>


<span class="pl-c">-- Forward form actions to Form.update</span>

<span class="pl-en">update</span> <span class="pl-k">:</span> <span class="pl-k">Action</span> <span class="pl-k">-&gt;</span> <span class="pl-k">Model</span> <span class="pl-k">-&gt;</span> (<span class="pl-k">Model</span>, <span class="pl-k">Effects</span> <span class="pl-k">Action</span>)
<span class="pl-en">update </span>action <span class="pl-k">(</span><span class="pl-c1"><span class="pl-c1">{</span></span>form<span class="pl-c1"><span class="pl-c1">}</span></span> <span class="pl-k">as </span>model<span class="pl-k">)</span> <span class="pl-k">=</span>
  <span class="pl-k">case </span>action <span class="pl-k">of</span>

    <span class="pl-c1">NoOp</span> <span class="pl-k">-&gt;</span>
      <span class="pl-k">(</span>model<span class="pl-c1"><span class="pl-c1">,</span></span> <span class="pl-c1">Effects</span><span class="pl-k">.</span>none<span class="pl-k">)</span>

    <span class="pl-c1">FormAction</span> formAction <span class="pl-k">-&gt;</span>
      <span class="pl-k">(</span><span class="pl-c1"><span class="pl-c1">{</span></span> model <span class="pl-k">|</span> form <span class="pl-k">=</span> <span class="pl-c1">Form</span><span class="pl-k">.</span>update formAction form<span class="pl-c1"><span class="pl-c1">},</span></span> <span class="pl-c1">Effects</span><span class="pl-k">.</span>none<span class="pl-k">)</span>


<span class="pl-c">-- Render form with Input helpers</span>

<span class="pl-en">view</span> <span class="pl-k">:</span> <span class="pl-k">Signal</span>.<span class="pl-k">Address</span> <span class="pl-k">Action</span> <span class="pl-k">-&gt;</span> <span class="pl-k">Model</span> <span class="pl-k">-&gt;</span> <span class="pl-k">Html</span>
<span class="pl-en">view </span>address <span class="pl-c1"><span class="pl-c1">{</span></span>form<span class="pl-c1"><span class="pl-c1">}</span></span> <span class="pl-k">=</span>
  <span class="pl-k">let</span>
    <span class="pl-c">-- Address for Form events</span>
    formAddress <span class="pl-k">=</span> <span class="pl-c1">Signal</span><span class="pl-k">.</span>forwardTo address <span class="pl-c1">FormAction</span>

    <span class="pl-c">-- error presenter</span>
    errorFor field <span class="pl-k">=</span>
      <span class="pl-k">case </span>field<span class="pl-k">.</span>liveError <span class="pl-k">of</span>
        <span class="pl-c1">Just</span> error <span class="pl-k">-&gt;</span>
          <span class="pl-c">-- replace toString with your own translations</span>
          div <span class="pl-c1"><span class="pl-c1">[</span></span> class <span class="pl-s"><span class="pl-pds">"</span>error<span class="pl-pds">"</span></span> <span class="pl-c1"><span class="pl-c1">]</span></span> <span class="pl-c1"><span class="pl-c1">[</span></span> text <span class="pl-k">(</span>toString error<span class="pl-k">)</span> <span class="pl-c1"><span class="pl-c1">]</span></span> 
        <span class="pl-c1">Nothing</span> <span class="pl-k">-&gt;</span>
          text <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>

    <span class="pl-c">-- fields states</span>
    bar <span class="pl-k">=</span> <span class="pl-c1">Form</span><span class="pl-k">.</span>getFieldAsString <span class="pl-s"><span class="pl-pds">"</span>bar<span class="pl-pds">"</span></span> form
    baz <span class="pl-k">=</span> <span class="pl-c1">Form</span><span class="pl-k">.</span>getFieldAsBool <span class="pl-s"><span class="pl-pds">"</span>baz<span class="pl-pds">"</span></span> form
  <span class="pl-k">in</span>
    div <span class="pl-c1"><span class="pl-c1">[]</span></span>
      <span class="pl-c1"><span class="pl-c1">[</span></span> label <span class="pl-c1"><span class="pl-c1">[]</span></span> <span class="pl-c1"><span class="pl-c1">[</span></span> text <span class="pl-s"><span class="pl-pds">"</span>Bar<span class="pl-pds">"</span></span> <span class="pl-c1"><span class="pl-c1">]</span></span>
      <span class="pl-c1"><span class="pl-c1">,</span></span> <span class="pl-c1">Input</span><span class="pl-k">.</span>textInput bar formAddress <span class="pl-c1"><span class="pl-c1">[]</span></span>
      <span class="pl-c1"><span class="pl-c1">,</span></span> errorFor bar

      <span class="pl-c1"><span class="pl-c1">,</span></span> label <span class="pl-c1"><span class="pl-c1">[]</span></span> 
      <span class="pl-c1"><span class="pl-c1">,</span></span> <span class="pl-c1">Input</span><span class="pl-k">.</span>checkboxInput baz formAddress <span class="pl-c1"><span class="pl-c1">[]</span></span>
      <span class="pl-c1"><span class="pl-c1">,</span></span> text <span class="pl-s"><span class="pl-pds">"</span>Baz<span class="pl-pds">"</span></span>
      <span class="pl-c1"><span class="pl-c1">]</span></span>

      <span class="pl-c1"><span class="pl-c1">,</span></span> errorFor baz

      <span class="pl-c1"><span class="pl-c1">,</span></span> button
          <span class="pl-c1"><span class="pl-c1">[</span></span> onClick formAddress <span class="pl-c1">Form</span><span class="pl-k">.</span>submit <span class="pl-c1"><span class="pl-c1">]</span></span>
          <span class="pl-c1"><span class="pl-c1">[</span></span> text <span class="pl-s"><span class="pl-pds">"</span>Submit<span class="pl-pds">"</span></span> <span class="pl-c1"><span class="pl-c1">]</span></span>
      <span class="pl-c1"><span class="pl-c1">]</span></span>


<span class="pl-c">-- Classic StartApp wiring</span>

<span class="pl-en">app </span><span class="pl-k">=</span> <span class="pl-c1">StartApp</span><span class="pl-k">.</span>start
  <span class="pl-c1"><span class="pl-c1">{</span></span> init <span class="pl-k">=</span> init
  <span class="pl-c1"><span class="pl-c1">,</span></span> update <span class="pl-k">=</span> update
  <span class="pl-c1"><span class="pl-c1">,</span></span> view <span class="pl-k">=</span> view
  <span class="pl-c1"><span class="pl-c1">,</span></span> inputs <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">[</span></span> <span class="pl-c1"><span class="pl-c1">]</span></span>
  <span class="pl-c1"><span class="pl-c1">}</span></span>

<span class="pl-en">main </span><span class="pl-k">=</span>
  app<span class="pl-k">.</span>html

<span class="pl-k">port </span><span class="pl-en">tasks</span> <span class="pl-k">:</span> <span class="pl-k">Signal</span> (<span class="pl-k">Task</span> <span class="pl-k">Effects</span>.<span class="pl-k">Never</span> <span class="pl-c1">()</span>)
<span class="pl-k">port </span>tasks <span class="pl-k">=</span>
  app<span class="pl-k">.</span>tasks</pre></div>

<h2>
<a id="advanced-usage" class="anchor" href="#advanced-usage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Advanced usage</h2>

<h3>
<a id="incremental-validation" class="anchor" href="#incremental-validation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Incremental validation</h3>

<p>Similar to what Json.Extra provides. Use <code>Form.apply</code>, or the <code>|:</code> infix version:</p>

<div class="highlight highlight-source-elm"><pre><span class="pl-c1">Form</span><span class="pl-k">.</span>succeed <span class="pl-c1">Player</span>
  <span class="pl-k">|:</span> <span class="pl-k">(</span><span class="pl-s"><span class="pl-pds">"</span>email<span class="pl-pds">"</span></span> <span class="pl-k">:=</span> string <span class="pl-k">`andThen`</span> email<span class="pl-k">)</span>
  <span class="pl-k">|:</span> <span class="pl-k">(</span><span class="pl-s"><span class="pl-pds">"</span>power<span class="pl-pds">"</span></span> <span class="pl-k">:=</span> int<span class="pl-k">)</span></pre></div>

<h3>
<a id="nested-records" class="anchor" href="#nested-records" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Nested records</h3>

<ul>
<li>Validation:</li>
</ul>

<div class="highlight highlight-source-elm"><pre><span class="pl-en">validate </span><span class="pl-k">=</span>
  form2 <span class="pl-c1">Player</span>
    <span class="pl-k">(</span><span class="pl-s"><span class="pl-pds">"</span>email<span class="pl-pds">"</span></span> <span class="pl-k">:=</span> string <span class="pl-k">`andThen`</span> email<span class="pl-k">)</span>
    <span class="pl-k">(</span><span class="pl-s"><span class="pl-pds">"</span>power<span class="pl-pds">"</span></span> <span class="pl-k">:=</span> int <span class="pl-k">`andThen`</span> <span class="pl-k">(</span>minInt <span class="pl-c1">0</span><span class="pl-k">))</span>
    <span class="pl-k">(</span><span class="pl-s"><span class="pl-pds">"</span>options<span class="pl-pds">"</span></span> <span class="pl-k">:=</span> form2 <span class="pl-c1">Options</span>
      <span class="pl-k">(</span><span class="pl-s"><span class="pl-pds">"</span>foo<span class="pl-pds">"</span></span> <span class="pl-k">:=</span> string<span class="pl-k">)</span>
      <span class="pl-k">(</span><span class="pl-s"><span class="pl-pds">"</span>bar<span class="pl-pds">"</span></span> <span class="pl-k">:=</span> string<span class="pl-k">))</span></pre></div>

<ul>
<li>View:</li>
</ul>

<div class="highlight highlight-source-elm"><pre><span class="pl-c1">Input</span><span class="pl-k">.</span>textInput <span class="pl-k">(</span><span class="pl-c1">Form</span><span class="pl-k">.</span>getFieldAsString <span class="pl-s"><span class="pl-pds">"</span>options.foo<span class="pl-pds">"</span></span> form<span class="pl-k">)</span> formAddress <span class="pl-c1"><span class="pl-c1">[]</span></span></pre></div>

<h3>
<a id="initial-values-and-reset" class="anchor" href="#initial-values-and-reset" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Initial values and reset</h3>

<ul>
<li>At form initialization:</li>
</ul>

<div class="highlight highlight-source-elm"><pre><span class="pl-k">import</span> <span class="pl-c1">Form.Field</span> <span class="pl-k">as</span> <span class="pl-c1">Field</span>

<span class="pl-en">initialFields</span> <span class="pl-k">:</span> <span class="pl-k">List</span> (<span class="pl-k">String</span>, <span class="pl-k">Field</span>)
<span class="pl-en">initialFields </span><span class="pl-k">=</span>
  <span class="pl-c1"><span class="pl-c1">[</span></span> <span class="pl-k">(</span><span class="pl-s"><span class="pl-pds">"</span>power<span class="pl-pds">"</span></span><span class="pl-c1"><span class="pl-c1">,</span></span> <span class="pl-c1">Field</span><span class="pl-k">.</span>text <span class="pl-s"><span class="pl-pds">"</span>10<span class="pl-pds">"</span></span><span class="pl-k">)</span>
  <span class="pl-c1"><span class="pl-c1">,</span></span> <span class="pl-k">(</span><span class="pl-s"><span class="pl-pds">"</span>options<span class="pl-pds">"</span></span><span class="pl-c1"><span class="pl-c1">,</span></span> <span class="pl-c1">Field</span><span class="pl-k">.</span>group
      <span class="pl-c1"><span class="pl-c1">[</span></span> <span class="pl-k">(</span><span class="pl-s"><span class="pl-pds">"</span>foo<span class="pl-pds">"</span></span><span class="pl-c1"><span class="pl-c1">,</span></span> <span class="pl-c1">Field</span><span class="pl-k">.</span>text <span class="pl-s"><span class="pl-pds">"</span>blah<span class="pl-pds">"</span></span><span class="pl-k">)</span>
      <span class="pl-c1"><span class="pl-c1">,</span></span> <span class="pl-k">(</span><span class="pl-s"><span class="pl-pds">"</span>bar<span class="pl-pds">"</span></span><span class="pl-c1"><span class="pl-c1">,</span></span> <span class="pl-c1">Field</span><span class="pl-k">.</span>text <span class="pl-s"><span class="pl-pds">"</span>meh<span class="pl-pds">"</span></span><span class="pl-k">)</span>
      <span class="pl-c1"><span class="pl-c1">]</span></span>
    <span class="pl-k">)</span>
  <span class="pl-c1"><span class="pl-c1">]</span></span>

<span class="pl-en">initialForm</span> <span class="pl-k">:</span> <span class="pl-k">Form</span>
<span class="pl-en">initialForm </span><span class="pl-k">=</span>
  <span class="pl-c1">Form</span><span class="pl-k">.</span>initial initialFields validate</pre></div>

<p>See <code>Form.Field</code> functions for more options.</p>

<ul>
<li>On demand:</li>
</ul>

<div class="highlight highlight-source-elm"><pre><span class="pl-en">button </span><span class="pl-c1"><span class="pl-c1">[</span></span> onClick formAddress <span class="pl-k">(</span><span class="pl-c1">Form</span><span class="pl-k">.</span>reset initialFields<span class="pl-k">)</span> <span class="pl-c1"><span class="pl-c1">]</span></span> <span class="pl-c1"><span class="pl-c1">[</span></span> text <span class="pl-s"><span class="pl-pds">"</span>Reset<span class="pl-pds">"</span></span> <span class="pl-c1"><span class="pl-c1">]</span></span></pre></div>

<h3>
<a id="custom-errors" class="anchor" href="#custom-errors" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Custom errors</h3>

<div class="highlight highlight-source-elm"><pre><span class="pl-k">type </span><span class="pl-c1">LocalError</span> <span class="pl-k">=</span> <span class="pl-c1">Fatal</span> <span class="pl-k">|</span> <span class="pl-c1">NotSoBad</span>

<span class="pl-en">validate</span> <span class="pl-k">:</span> <span class="pl-k">Validate</span> <span class="pl-k">LocalError</span> <span class="pl-k">Foo</span>
<span class="pl-en">validate </span><span class="pl-k">=</span>
  <span class="pl-k">(</span><span class="pl-s"><span class="pl-pds">"</span>foo<span class="pl-pds">"</span></span> <span class="pl-k">:=</span> string <span class="pl-k">|&gt;</span> customError <span class="pl-c1">Fatal</span><span class="pl-k">)</span>

<span class="pl-c">-- creates `Form.Error.CustomError Fatal`</span></pre></div>

<h3>
<a id="async-validation" class="anchor" href="#async-validation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Async validation</h3>

<p>This package doesn't provide anything special for async validation, but doesn't prevent you to do that neither. As field values are accessible from <code>update</code> with <code>Form.getStringAt/getBoolAt</code>, you can proceed them as you need, trigger effects like an HTTP request, and then add any errors to the view by yourself.</p>

<p>Another way would be to enable dynamic validation reload, to make it dependant of an effect, as it's part of the form state. Please ping me if this feature would be useful to you.</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/etaque/elm-simple-form">Elm Simple Form</a> is maintained by <a href="https://github.com/etaque">etaque</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
